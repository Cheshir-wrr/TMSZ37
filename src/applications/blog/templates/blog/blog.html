{% extends "_base.html" %}

{% block main %}

 <h1>All posts</h1>
{% if not user.is_anonymous %}
<form method="post" action="{% url 'blog:new_post' %}">
   <p>
    <label for="id_title">Title</label>
    <input id="id_title" type="text" name="title">
   </p>
       <p>
    <label for="id_content">Content</label>
    <input id="id_content" type="text" name="content">
   </p>
      <button>Send</button>
   <p>{% csrf_token %}</p>
</form>
{% endif %}

{% if user.is_superuser %}
<form method="post" action="{% url 'blog:reset_all' %}">
  <p>
  <button type="submit">Reset</button>
  </p>
  <p>{% csrf_token %}</p>
    </form>
{% endif %}


{% for post in object_list %}

    <article class="post">


     <h3><span class="content">{{post.title}}</span></h3>
     <p><span class="content">{{ post.content }}</span></p>
        <p><span class="date">{{ post.created_at }}</span></p>
        <p>Post_id:{{ post.id }}</p>
         <p style='font-size:18px'>Author: {{post.author.username}}</p>

      <span class="views">&#128064&nbsp;{{ post.nr_views }}</span>
      <span class="likes">💙&nbsp;{{ post.nr_likes }}</span>
      <span class="likes">&#128148&nbsp;{{ post.nr_dlikes }}</span>



      {% if user.is_superuser or post.author == user %}
     <form method="post" action="{% url 'blog:post_delete' pk=post.pk %}">
  <p><button type="submit">❌</button></p>
    <p>{% csrf_token %}</p>
    </form>

     <form action="{% url 'blog:post_update' pk=post.pk %}">
  <p><button type="submit">✏</button></p>
    <p>{% csrf_token %}</p>
    </form>
 </article>
{% endif %}
{% endfor %}

{% endblock %}
